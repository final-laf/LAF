<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edu.kh.laf.order.model.mapper.OrderMapper">
    
    <!-- 주문자조회 -->
    <select id="selectOrderMember" resultType="Member">
        SELECT * FROM member WHERE member_no = #{memberNo}
	</select>

    <!-- 상품조회 -->
    <select id="selectOrderProduct" resultType="Product">
		SELECT `product`.product_no,
				product_name,
				product_price,
				product_sale_price,
				product_sale,
				product_point,
				product_state,
				DATE_FORMAT(product_date, '%Y-%m-%d') AS product_date,
				click_count,
				img_path AS thumbnail_path,
				(select count(*) from `like` where  `product`.product_no = `like`.product_no) AS like_count
		FROM   `product`
				JOIN `product_img` ON `product`.product_no = `product_img`.product_no
		WHERE  `product`.product_no = #{memberNo}
				AND thumb_fl  = 'Y'
	</select>
   
    <!-- 옵션조회 -->
    <select id="selectOrderProductOption" resultType="Option">
		SELECT `size` , color 
		FROM `option`
		WHERE product_no = #{productNo}
		AND option_no = #{optionNo}
	</select>

    <!-- 쿠폰조회 -->
    <select id="selectCouponList" resultType="Coupon">
		SELECT * FROM coupon WHERE member_no = #{memberNo}
	</select>
	
	
</mapper>

