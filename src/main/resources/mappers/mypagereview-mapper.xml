<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edu.kh.laf.mypage.model.mapper.MypageReviewMapper">

	
	<!-- myReviewList -->
     <select id="myReview" resultType="OrderProduct">
        SELECT o.order_no, product_no,  member_no, option_no, count FROM `order` o RIGHT JOIN `order_product` op ON (o.order_no=op.order_no)  WHERE member_no=#{memberNo} AND review_no IS null
    </select>
	<!-- myReviewOption -->
     <select id="myOrderOption" resultType="Option">
        SELECT * FROM `option` o WHERE option_no=#{optionNo}
    </select>
	<!-- myReviewOption -->
     <select id="myOrderProduct" resultType="Product">
        SELECT * FROM `product` o WHERE product_no=#{productNo}
    </select>
    
    
    <!--상품 조회-->
    <select id="selectOrderProduct" resultType="Product">
		SELECT product_name, product_price, product_sale_price, i.img_path
		FROM product AS p
		JOIN product_img AS i ON p.product_no = i.product_no
		WHERE thumb_fl = 'Y'
		AND p.product_no = #{productNo};
	</select>
   
    <!-- 옵션조회 -->
    <select id="selectOrderProductOption" resultType="Option">
		SELECT `size` , color 
		FROM `option`
		WHERE product_no = #{productNo}
		AND option_no = #{optionNo};
	</select>
    
    <!-- myReviewList -->
     <select id="myWrittenReview" resultType="OrderProduct">
        SELECT o.order_no, product_no,  member_no, option_no, count FROM `order` o RIGHT JOIN `order_product` op ON (o.order_no=op.order_no)  WHERE member_no=#{memberNo} AND review_no IS NOT null
    </select>
    

</mapper>

