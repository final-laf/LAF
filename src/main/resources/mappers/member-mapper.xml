<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edu.kh.laf.member.model.mapper.MemberMapper">
    
         <!-- 로그인 -->
     <select id="login" resultType="Member">
	  SELECT   MEMBER_NO, MEMBER_ID, MEMBER_PW, MEMBER_NAME, MEMBER_GENDER, 
	    	   MEMBER_AGE, MEMBER_EMAIL, MEMBER_PHONE, MEMBER_BIRTH, MEMBER_GRADE,
	    	   DATE_FORMAT(MEMBER_ENROLL_DATE, '%Y년%m월%d일') AS MEMBER_ENROLL_DATE,
	    	   MEMBER_DEL_FL, 
	    	   DATE_FORMAT(MEMBER_DEL_DATE, '%Y년%m월%d일') AS MEMBER_DEL_DATE,
	    	   MEMBER_SOCIAL, MEMBER_POINT,
	    	   MEMBER_TOTALPAY, MEMBER_NOT, REFUND_NAME, REFUND_BANK, REFUND_ACCOUNT
	  FROM `member`
	  WHERE MEMBER_DEL_FL = 'N'
	  AND MEMBER_ID = #{memberId}
     </select>
     
     	<!-- 회원 가입(SQL 수정 필요, 동적 SQL 사용해야) -->	
  	<insert id="signUp">
  		INSERT INTO `member`
		VALUES (NULL, 
				#{memberId}, 
				#{memberPw}, 
				#{memberName}, 
				NULL, 
				NULL,
				#{memberEmail}, 
				#{memberPhone}, 
				NULL, 
				2, 
				DEFAULT, 
				DEFAULT, 
				NULL, 
				NULL, 
				DEFAULT, 
				DEFAULT, 
				DEFAULT, 
				NULL, 
				NULL, 
				NULL)
  	</insert>
  	
  	
  	<!--아이디 중복 검사-->
  	<select id="checkId" resultType="_int">
		SELECT COUNT(*) FROM `member`
		WHERE member_id  = #{memberId}
		AND member_del_fl  = 'N'
	</select>
  	
  	
  	<!--이메일 중복 검사-->
  	<select id="checkEmail" resultType="_int">
		SELECT COUNT(*) FROM `member`
		WHERE member_email  = #{memberEmail}
		AND member_del_fl  = 'N'
	</select>
	
  	
  	
  	
</mapper>

